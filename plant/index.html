<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="Iroko Ewé Knowledge Explorer: stewardship-centered linked data for ethically governed ethnobotanical knowledge.">  
  <title>Plants | Iroko Ewé Knowledge Explorer</title>
  <link rel="stylesheet" href="/iroko-ewe-explorer/assets/style.css">
  <style>
    .lang-panel { display: none; }
    .lang-panel.active { display: block; }
  
    .top-nav {
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
      margin: 10px 0 22px 0;
    }
    .top-nav a {
      text-decoration: none;
      font-weight: 600;
    }
  </style>
  <script src="https://unpkg.com/n3@1.20.0/browser/n3.min.js"></script>
</head>

<body>

<header class="iroko-header">
  <div class="header-inner">

    <div class="logo-block">
      <a href="/iroko-ewe-explorer/index.html" aria-label="Return to Homepage">
        <img src="/iroko-ewe-explorer/assets/IHS-Logo.jpg" alt="Iroko Historical Society Logo">
      </a>
    </div>
    
    <div class="header-text">
      <h1>Iroko Ewé Knowledge Explorer</h1>
      <p class="subtitle">Linked Data for Ethically Governed Ethnobotanical Knowledge</p>
      <div class="version-pill">Version 0.2.1 | February 2026</div>

      <div class="lang-buttons" aria-label="Language selector">
        <button type="button" onclick="setLang('en')" id="btn-en">English</button>
        <button type="button" onclick="setLang('es')" id="btn-es">Español</button>
        <button type="button" onclick="setLang('pt')" id="btn-pt">Português</button>
        <button type="button" onclick="setLang('fr')" id="btn-fr">Français</button>
        <button type="button" onclick="setLang('yo')" id="btn-yo">Èdè Yorùbá</button>
      </div>

    </div>
  </div>
</header>

<nav class="top-nav">
  <a href="/iroko-ewe-explorer/index.html">Home</a>
  <a href="/iroko-ewe-explorer/concept/index.html">Controlled Vocabularies</a>
</nav>

<!-- EN -->
<section id="panel-en" class="lang-panel active">
  <h2>Plant Records</h2>

  <p>
    Plant records in this Explorer are structured knowledge nodes within the Iroko Framework.
    Each record integrates botanical classification, multilingual naming traditions,
    and governance-aware metadata.
  </p>

  <p>
    When the dataset is published, each plant page will display:
  </p>

  <ul>
    <li><strong>Primary Yorùbá label</strong> (epistemic anchor)</li>
    <li>Scientific name (taxonomic reference)</li>
    <li>Multilingual alternate names</li>
    <li>Access level classification</li>
    <li>Medicinal categories</li>
    <li>Ritual categories</li>
    <li>Provenance and external references</li>
  </ul>

  <p>
    Where applicable, plant records may also link to preserved specimens and herbarium records
    modeled using Darwin Core occurrence standards.
  </p>

  <h3>Preview (from data/ewe-plants-v0.2.1.ttl)</h3>
  <p class="muted">Loading plant list…</p>
  <div id="plant-list-en"></div>
</section>

<!-- ES -->
<section id="panel-es" class="lang-panel">
  <h2>Registros de plantas</h2>

  <p>
    Los registros de plantas en este Explorador son nodos de conocimiento estructurados dentro del Iroko Framework.
    Cada registro integra clasificación botánica, tradiciones multilingües de denominación
    y metadatos con gobernanza explícita.
  </p>

  <p>
    Cuando se publique el conjunto de datos, cada página de planta mostrará:
  </p>

  <ul>
    <li><strong>Etiqueta principal en yorùbá</strong> (anclaje epistémico)</li>
    <li>Nombre científico (referencia taxonómica)</li>
    <li>Nombres alternativos multilingües</li>
    <li>Clasificación del nivel de acceso</li>
    <li>Categorías medicinales</li>
    <li>Categorías rituales</li>
    <li>Procedencia y referencias externas</li>
  </ul>

  <p>
    Cuando corresponda, los registros podrán enlazar a especímenes preservados y registros de herbario
    modelados con estándares Darwin Core para ocurrencias.
  </p>

  <p><em>Todavía no se han publicado registros de plantas.</em></p>
</section>

<!-- PT -->
<section id="panel-pt" class="lang-panel">
  <h2>Registros de plantas</h2>

  <p>
    Os registros de plantas neste Explorador são nós de conhecimento estruturados dentro do Iroko Framework.
    Cada registro integra classificação botânica, tradições multilíngues de nomeação
    e metadados com governança explícita.
  </p>

  <p>
    Quando o conjunto de dados for publicado, cada página de planta exibirá:
  </p>

  <ul>
    <li><strong>Rótulo principal em yorùbá</strong> (âncora epistêmica)</li>
    <li>Nome científico (referência taxonômica)</li>
    <li>Nomes alternativos multilíngues</li>
    <li>Classificação do nível de acesso</li>
    <li>Categorias medicinais</li>
    <li>Categorias rituais</li>
    <li>Proveniência e referências externas</li>
  </ul>

  <p>
    Quando aplicável, os registros poderão vincular a espécimes preservados e registros de herbário
    modelados com padrões Darwin Core para ocorrências.
  </p>

  <p><em>Ainda não há registros de plantas publicados.</em></p>
</section>

<!-- FR -->
<section id="panel-fr" class="lang-panel">
  <h2>Notices de plantes</h2>

  <p>
    Les notices de plantes dans cet Explorateur sont des nœuds de connaissance structurés au sein du Iroko Framework.
    Chaque notice intègre une classification botanique, des traditions multilingues de nomination
    et des métadonnées à gouvernance explicite.
  </p>

  <p>
    Une fois le jeu de données publié, chaque page de plante affichera :
  </p>

  <ul>
    <li><strong>Libellé principal en yorùbá</strong> (ancrage épistémique)</li>
    <li>Nom scientifique (référence taxonomique)</li>
    <li>Noms alternatifs multilingues</li>
    <li>Classification du niveau d’accès</li>
    <li>Catégories médicinales</li>
    <li>Catégories rituelles</li>
    <li>Provenance et références externes</li>
  </ul>

  <p>
    Le cas échéant, les notices pourront renvoyer à des spécimens conservés et à des notices d’herbier,
    modélisés selon les standards Darwin Core (occurrences).
  </p>

  <p><em>Aucune notice de plante n’a encore été publiée.</em></p>
</section>

<!-- YO -->
<section id="panel-yo" class="lang-panel">
  <h2>Àwọn àkọsílẹ̀ ọgbìn</h2>

  <p>
    Àwọn àkọsílẹ̀ ọgbìn nínú Explorer yìí jẹ́ “nódù” ìmọ̀ tí a ṣètò lábẹ́ Iroko Framework.
    Àkọsílẹ̀ kọọkan ń darapọ̀ ìpín ọgbìn (botanical classification), àṣà orúkọ ní ọ̀pọ̀ èdè,
    àti metadátà pẹ̀lú ìṣàkóso tó hàn gbangba.
  </p>

  <p>
    Nígbà tí a bá tẹ̀ dataset jáde, ojú-ewé ọgbìn kọọkan yóò fi hàn:
  </p>

  <ul>
    <li><strong>Orúkọ Yorùbá gẹ́gẹ́ bí “primary label”</strong> (ìdákọ̀ró ìmọ̀)</li>
    <li>Orúkọ sáyẹ́ǹsì (ìtọ́kasí taxon)</li>
    <li>Àwọn orúkọ míì ní ọ̀pọ̀ èdè</li>
    <li>Ìpele àyèwọ̀lé</li>
    <li>Àwọn ẹ̀ka ìwòsàn</li>
    <li>Àwọn ẹ̀ka ìṣe-ẹ̀mí</li>
    <li>Provenance àti àwọn ìtọ́kasí òde</li>
  </ul>

  <p>
    Níbi tó bá yẹ, àkọsílẹ̀ ọgbìn lè so mọ́ “preserved specimen” àti àkọsílẹ̀ herbarium
    tí a ṣe pẹ̀lú ìlànà Darwin Core (occurrence).
  </p>

  <p><em>Kò tíì sí àkọsílẹ̀ ọgbìn tí a tẹ̀ jáde.</em></p>
</section>


<footer class="footer">
  <a href="/iroko-ewe-explorer/index.html">← Back to Home</a>
</footer>

<script>
  function setLang(lang) {
    const panels = document.querySelectorAll(".lang-panel");
    const buttons = document.querySelectorAll(".lang-buttons button");

    panels.forEach(p => p.classList.remove("active"));
    buttons.forEach(b => b.classList.remove("active"));

    const panel = document.getElementById("panel-" + lang);
    const btn = document.getElementById("btn-" + lang);

    if (panel) panel.classList.add("active");
    if (btn) btn.classList.add("active");

    document.documentElement.lang = lang;

    try { localStorage.setItem("iroko_lang", lang); } catch(e) {}
  }

  (function init() {
    let saved = "en";
    try { saved = localStorage.getItem("iroko_lang") || "en"; } catch(e) {}
    setLang(saved);
  })();
</script>
  
<script>
  async function loadPlantsTTL() {
    const statusEl = document.querySelector("#panel-en .muted");
    const listEl = document.getElementById("plant-list-en");

    // ✅ parse v0.2.1 dataset
    const TTL_URL = "../data/ewe-plants-v0.2.1.ttl";

    try {
      const res = await fetch(TTL_URL);
      if (!res.ok) throw new Error("Could not load " + TTL_URL + " (HTTP " + res.status + ")");

      const ttlText = await res.text();

      const parser = new N3.Parser();
      const quads = parser.parse(ttlText);

      // Helpers
      const endsWith = (uri, suffix) => uri && uri.toLowerCase().endsWith(suffix.toLowerCase());

      // Common URIs (and we also support suffix matching)
      const DWC_SCI = "http://rs.tdwg.org/dwc/terms/scientificName";
      const SKOS_ALT = "http://www.w3.org/2004/02/skos/core#altLabel";
      const SKOS_PREF = "http://www.w3.org/2004/02/skos/core#prefLabel";
      const RDF_TYPE = "http://www.w3.org/1999/02/22-rdf-syntax-ns#type";

      const bySubject = new Map();

      for (const q of quads) {
        const s = q.subject.value;
        const p = q.predicate.value;
        const o = q.object;

        if (!bySubject.has(s)) {
          bySubject.set(s, { uri: s, sci: null, yo: [], labels: [], types: [] });
        }

        const rec = bySubject.get(s);

        if (p === RDF_TYPE) rec.types.push(o.value);

        // scientific name: exact dwc URI OR anything ending in "scientificName"
        if ((p === DWC_SCI || endsWith(p, "/scientificName") || endsWith(p, "#scientificName")) && o.termType === "Literal") {
          rec.sci = o.value;
        }

        // labels: skos:altLabel / prefLabel OR anything ending in "altLabel"/"prefLabel"
        const isAlt = (p === SKOS_ALT || endsWith(p, "altLabel"));
        const isPref = (p === SKOS_PREF || endsWith(p, "prefLabel"));

        if ((isAlt || isPref) && o.termType === "Literal") {
          const txt = o.value;
          const lang = (o.language || "").toLowerCase();

          rec.labels.push({ txt, lang, pref: isPref });

          // Yorùbá list (you can expand later to show ES/PT/FR labels too)
          if (lang === "yo") rec.yo.push(txt);
        }
      }

      // Treat anything with a scientific name as a Plant record
      const plants = Array.from(bySubject.values())
        .filter(r => r.sci)
        .sort((a, b) => (a.sci || "").localeCompare(b.sci || ""));

      if (statusEl) statusEl.textContent = "Loaded " + plants.length + " plant record(s) from v0.2.1.";

      listEl.innerHTML = "";

      if (!plants.length) {
        listEl.innerHTML = "<p><em>No plant records found. If your TTL uses a different property than scientificName, we can map it.</em></p>";
        return;
      }

      for (const p of plants) {
        const yo = p.yo.length ? p.yo.join("; ") : "—";

        const card = document.createElement("div");
        card.style.border = "1px solid rgba(48,64,32,0.18)";
        card.style.borderRadius = "12px";
        card.style.padding = "12px 14px";
        card.style.margin = "12px 0";
        card.innerHTML = `
          <div style="font-weight:700;">${p.sci}</div>
          <div style="opacity:.85;"><strong>Yorùbá:</strong> ${yo}</div>
          <div style="opacity:.7; font-size:.9rem; margin-top:6px;">${p.uri}</div>
        `;
        listEl.appendChild(card);
      }

    } catch (err) {
      if (statusEl) statusEl.textContent = "Error loading plant data.";
      if (listEl) listEl.innerHTML = "<p><em>" + err.message + "</em></p>";
      console.error(err);
    }
  }

  window.addEventListener("DOMContentLoaded", loadPlantsTTL);
</script>


</body>
</html>
